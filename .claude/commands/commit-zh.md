---
allowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*), Bash(git diff:*), Bash(git push:*)
description: 创建标准的约定式提交（Conventional Commits），当有助于提高清晰度时将更改拆分为多个提交，并推送到远程仓库。
---

## 提交消息任务步骤

1. 运行 `git status` 了解工作树状态
2. 运行 `git diff` 查看待处理的编辑
3. 按逻辑范围分组更改，并为每个组选择适当的**约定式提交类型**：

  - `feat:` 新功能
  - `fix:` 错误修复
  - `docs:` 文档更改
  - `style:` 格式化更改（空格、格式、缺少分号等，不影响代码运行）
  - `refactor:` 代码重构（既不修复错误也不添加功能）
  - `test:` 测试添加/更改
  - `chore:` 维护任务（构建过程、辅助工具、依赖库）
  - `perf:` 性能优化
  - `ci:` CI/CD 配置更改

4. **破坏性变更（Breaking Changes）**：
   - **必须**在提交信息的底注（Footer）中添加 `BREAKING CHANGE:` 字段，后跟变更描述。
   - 可选：在类型/范围后添加感叹号（如 `feat!:`）以在标题中进行视觉提示。

5. 当存在多个逻辑组时，逐一处理：

  - 仅暂存当前组的文件或代码块（如 `git add <paths>` 或 `git add -p`）
  - 创建符合组范围的**约定式提交消息**（**必须使用中文**）

6. 如果只有一个逻辑组，在提交前使用 `git add -A` 暂存所有内容
7. 使用 `git push` 推送当前分支的所有提交

## 拆分提交的准则

- **优先原则**：每个提交应该是一个独立的、有意义的逻辑单元
- **拆分情况**：
  - 不同类型的更改（如功能 vs 文档 vs 修复）应拆分为独立提交
  - 不同模块或功能领域的更改应分别提交
  - 重构与新功能应分开提交
- **不拆分情况**：
  - 相互依赖的更改应保持在同一提交中
  - 同一功能的相关文件（如组件 + 样式 + 测试）可以合并提交
  - 琐碎的格式化或小调整可以合并
- **最大条数限制**：单次操作最多拆分为 **5 个提交**
  - 如果逻辑组超过 5 个，合并相似或相关的更改
  - 优先保留最重要和最独立的逻辑组
  - 必要时将次要更改合并为一个 `chore` 或 `refactor` 提交

## 提交消息示例

```md
# 常规提交
feat: 添加用户头像上传功能
fix: 修复登录页面在移动端的布局问题
docs: 更新 API 文档说明

# 带范围的提交
feat(auth): 增加 JWT 令牌验证支持
refactor(utils): 优化日期处理函数逻辑

# 破坏性变更（符合规范）
feat!: 重构配置系统使用 YAML 格式

BREAKING CHANGE: 配置文件格式从 JSON 改为 YAML，旧的 config.json 将不再被读取。
```

记住：此项目严格遵循 **Conventional Commits 规范**。**所有提交信息必须使用中文编写**。不要在提交消息中添加共同作者。
