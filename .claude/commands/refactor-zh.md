---
description: 快速优化单个方法/函数的实现逻辑
---

# 方法快速重构

优化单个方法/函数,直接提供改进后的代码片段

## 使用方式

```bash
/refactor <文件路径:方法名>
# 示例
/refactor src/utils/auth.ts:validateUser
```

## 分析重点

### 代码质量
- **复杂度降低**: 简化嵌套逻辑、减少分支
- **可读性提升**: 清晰的变量命名、适当的注释
- **性能优化**: 算法优化、避免重复计算

### 现代化改进
- **现代语法**: 使用 ES6+ 特性
  - 解构赋值
  - 箭头函数
  - 可选链 `?.`
  - 空值合并 `??`
  - async/await
- **类型安全**: TypeScript 类型注解
- **函数式编程**: map/filter/reduce 替代循环

### 边界处理
- **参数验证**: 输入检查、默认值
- **错误处理**: try-catch、优雅降级
- **边界情况**: null/undefined、空数组/对象

## 输出格式

### 1. 原方法代码
显示当前实现(带行号)

### 2. 优化后代码
提供改进版本(直接可替换)

### 3. 改进说明
简要列出主要优化点:
- ✨ 新增特性
- ♻️ 重构逻辑
- ⚡ 性能提升
- 🐛 修复问题
- 📝 改进可读性

### 4. 对比分析
| 维度 | 优化前 | 优化后 |
|------|--------|--------|
| 行数 | X 行 | Y 行 |
| 复杂度 | 高/中/低 | 高/中/低 |
| 性能 | 基线 | +N% |

## 优化原则

- ✅ 保持原有功能不变
- ✅ 向后兼容(除非明确破坏性变更)
- ✅ 遵循项目现有代码风格
- ✅ 优先可读性,其次性能
- ⚠️ 不过度优化,避免复杂抽象
- ⚠️ 不添加未使用的功能

## 适用场景

- 单个方法过于复杂(>30 行)
- 性能瓶颈函数
- 重复代码提取
- 现代化语法升级
- 错误处理改进

## 不适用场景

- 需要重构整个类/模块(使用 `/optimize`)
- 需要生成新文件(使用 `/optimize`)
- 涉及架构调整(使用 `/optimize`)
